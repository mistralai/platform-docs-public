import { Tabs, TabItem } from '@/components/common/multi-codeblock';

<Tabs groupId="code">
    <TabItem value="python" label="python">

```python
import os
import asyncio
import pathlib
from mistralai import Mistral, File
from dotenv import load_dotenv

# Load environment variables from .env file
load_dotenv()

def main():
    api_key = os.environ["MISTRAL_API_KEY"]
    model = "voxtral-mini-2602"

    client = Mistral(api_key=api_key)
    with open("/path/to/file/audio.mp3", "rb") as f:
        response = client.audio.transcriptions.complete(
            model=model,
            file_url="https://docs.mistral.ai/audio/obama.mp3",
            diarize=True,
            timestamp_granularities=["segment"],
        )
        for segment in response.segments:
            speaker = segment.speaker_id or "unknown"
            print(
                f"[{segment.start:.1f}s → {segment.end:.1f}s] {speaker}: {segment.text.strip()}"
            )
main()
```

    </TabItem>
    <TabItem value="typescript" label="typescript">

```typescript
import { Mistral } from "@mistralai/mistralai";
import * as fs from "fs";
import * as dotenv from "dotenv";

// Load environment variables from .env file
dotenv.config();

async function main() {
    const apiKey = process.env["MISTRAL_API_KEY"];
    const model = "voxtral-mini-2602";

    const client = new Mistral({ apiKey: apiKey });
    const audioFile = fs.readFileSync("/path/to/file/audio.mp3");

    const response = await client.audio.transcriptions.complete({
        model: model,
        fileUrl: "https://docs.mistral.ai/audio/obama.mp3"
        diarize: true,
        timestamp_granularities: ["segment"],
    });

    for (const segment of response.segments) {
        const speaker = segment.speaker_id || "unknown";
        console.log(
            `[${segment.start.toFixed(1)}s → ${segment.end.toFixed(1)}s] ${speaker}: ${segment.text.trim()}`
        );
    }
}

main().catch(console.error);
```

    </TabItem>
    <TabItem value="output" label="output">

```json
[0.8s → 8.1s] speaker_1: This week, I traveled to Chicago to deliver my final farewell address to the nation, following in the tradition of presidents before me.
[8.9s → 10.9s] speaker_1: It was an opportunity to say thank you.
[11.7s → 14.7s] speaker_1: Whether we've seen eye to eye or rarely agreed at all,
[15.4s → 26.2s] speaker_1: My conversations with you, the American people, in living rooms, in schools, at farms, and on factory floors, at diners, and on distant military outposts,
[26.9s → 32.4s] speaker_1: all these conversations are what have kept me honest, kept me inspired, and kept me going.
[33.2s → 35.0s] speaker_1: Every day, I learned from you.
[35.8s → 39.0s] speaker_1: You made me a better president, and you made me a better man.
[39.7s → 45.7s] speaker_1: Over the course of these eight years, I've seen the goodness, the resilience, and the hope of the American people.
[46.4s → 51.5s] speaker_1: I've seen neighbors looking out for each other as we rescued our economy from the worst crisis of our lifetimes.
[52.3s → 56.6s] speaker_1: I've hugged cancer survivors who finally know the security of affordable health care.
[57.5s → 65.9s] speaker_1: I've seen communities like Joplin rebuild from disaster, and cities like Boston show the world that no terrorist will ever break the American spirit.
[67.0s → 71.4s] speaker_1: I've seen the hopeful faces of young graduates and our newest military officers.
[72.0s → 77.9s] speaker_1: I've mourned with grieving families searching for answers, and I found grace in a Charleston church.
[78.9s → 85.4s] speaker_1: I've seen our scientists help a paralyzed man regain his sense of touch, and our wounded warriors walk again.
[86.3s → 92.1s] speaker_1: I've seen our doctors and volunteers rebuild after earthquakes and stop pandemics in their tracks.
[93.0s → 99.4s] speaker_1: I've learned from students who are building robots and curing diseases, and who will change the world in ways we can't even imagine.
[100.5s → 111.1s] speaker_1: I've seen the youngest of children remind us of our obligations to care for our refugees, to work in peace, and above all, to look out for each other.
[111.8s → 119.7s] speaker_1: That's what's possible when we come together in the slow, hard, sometimes frustrating, but always vital work of self-government.
[120.6s → 122.6s] speaker_1: But we can't take our democracy for granted.
[123.7s → 128.8s] speaker_1: All of us, regardless of party, should throw ourselves into the work of citizenship.
[129.6s → 131.0s] speaker_1: Not just when there is an election.
[131.7s → 134.4s] speaker_1: Not just when our own narrow interest is at stake.
[135.2s → 137.6s] speaker_1: But over the full span of a lifetime.
[138.6s → 143.7s] speaker_1: If you're tired of arguing with strangers on the Internet, try to talk with one in real life.
[144.5s → 148.6s] speaker_1: If something needs fixing, lace up your shoes and do some organizing.
[149.4s → 155.9s] speaker_1: If you're disappointed by your elected officials, then grab a clipboard, get some signatures, and run for office yourself.
[157.0s → 164.6s] speaker_1: Our success depends on our participation, regardless of which way the pendulum of power swings.
[165.5s → 174.8s] speaker_1: It falls on each of us to be guardians of our democracy, to embrace the joyous task we've been given to continually try to improve this great nation of ours.
[175.7s → 181.9s] speaker_1: Because for all our outward differences, we all share the same proud title, citizen.
[183.3s → 186.1s] speaker_1: It has been the honor of my life to serve you as President.
[187.1s → 197.5s] speaker_1: Eight years later, I am even more optimistic about our country's promise, and I look forward to working along your side as a citizen for all my days that remain.
[198.7s → 199.8s] speaker_1: Thanks, everybody.
[200.1s → 203.5s] speaker_1: God bless you, and God bless the United States of America.
```

    </TabItem>
</Tabs>
